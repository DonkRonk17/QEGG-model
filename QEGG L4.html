<!DOCTYPE html>
<html lang="en">
    <head>
        <title>QEGG L4</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <meta name="generator" content="FreeCAD 1.0.2">
        <style>
            * {
                margin: 0;
                padding: 0;
            }
            body {
                background: #ffffff; /* Old browsers */
                background: -moz-linear-gradient(top, #e3e9fc 0%, #ffffff 70%, #e2dab3 100%); /* FF3.6-15 */
                background: -webkit-linear-gradient(top, #e3e9fc 0%,#ffffff 70%,#e2dab3 100%); /* Chrome10-25, Safari5.1-6 */
                background: linear-gradient(to bottom, #e3e9fc 0%,#ffffff 70%,#e2dab3 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
                width: 100vw;
                height: 100vh;
            }
            canvas { display: block; }
            #mainCanvas {
                width: 100%;
                height: 100%;
            }
            #arrowCanvas  {
                position: absolute;
                left: 0px;
                bottom: 0px;
                width: 150px;
                height: 150px;
                z-index: 100;
            }
            select { width: 170px; }
        </style>
    </head>
    <body>
        <canvas id="mainCanvas"></canvas>
        <canvas id="arrowCanvas"></canvas>
        <script type="module">
            // Direct from mrdoob: https://www.jsdelivr.com/package/npm/three
            import * as THREE from            'https://cdn.jsdelivr.net/npm/three@0.125.0/build/three.module.js';
            import { OrbitControls } from     'https://cdn.jsdelivr.net/npm/three@0.125.0/examples/jsm/controls/OrbitControls.js';
            import { GUI } from               'https://cdn.jsdelivr.net/npm/three@0.125.0/examples/jsm/libs/dat.gui.module.js';
            import { Line2 } from             'https://cdn.jsdelivr.net/npm/three@0.125.0/examples/jsm/lines/Line2.js';
            import { LineMaterial } from      'https://cdn.jsdelivr.net/npm/three@0.125.0/examples/jsm/lines/LineMaterial.js';
            import { LineGeometry } from      'https://cdn.jsdelivr.net/npm/three@0.125.0/examples/jsm/lines/LineGeometry.js';
            import { EdgeSplitModifier } from 'https://cdn.jsdelivr.net/npm/three@0.125.0/examples/jsm/modifiers/EdgeSplitModifier.js';

            const data = {"camera":{"type":"Orthographic","focalDistance":1.0704662799835205,"position_x":0.0,"position_y":0.0,"position_z":1.0704662799835205},"file":{},"objects":[{"name":"Child_2_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghigjkdlm","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":")O/ob0~t[yq$YE;Zk64iV,!uo8mb(,D:`r=X!oQJ2tckiIXuK#mb*`gFNWhKYfB8"},{"name":"Parent_2","color":"#ffffff","opacity":1.0,"verts":"1abcddefghcahede","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RaTu412b?B;N5|T0:BH=Sglk(`1uT2mb*/Jv3duG"},{"name":"Child_2_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"=H/o2/Z[?hfEw+%)DC1yT![kYQ/oh:Z[w7dDF]kM]s4XmC>iVJUul$mbn66I*s-ElU%Cm,#u"},{"name":"Child_2_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"li/oevi2awl0z5LFu~?G[OXko4/o>9~taUq$2Nb&0rn4i/Tue`Zb%3{tZ9_{8%|MooJjt~/o^k28"},{"name":"Child_2_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghijhikef","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RaTuOD2b~;_:L=D$rB4+U+fS{m8u!E1b}>{:j#|y9{,)+OfjzM/ofUjH"},{"name":"Child_2_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"r$Xu;r2b~B;N#6e+;/n>uXcKdB0u*~ZbD>{:`_m!/i=v+,WjT1Yue#mbNquN,;|_I2hZtV5u"},{"name":"Child_2_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RM2u_a2bC%W[+lQS*s-E?m*Cic$u34mb/-]=,P~MDXd87J3u?&1bnC;NR]6TDC1y#d]k>W/oW/O["},{"name":"Child_2_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghigjkdlm","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"HM3ux51bpC;NSNHwCYy[S^!xEq%u&6mbzRETlztRFGV5kkKkj9/oteE&Rh60KQry"},{"name":"Child_2_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RM2u8B1bE/_:D;g%DC1ylOLi>z=oq%W[-}f=%Z,4JlZk,c/ovN>NN)7!m6/CF0QJNuRkU6/o6#?t"},{"name":"Child_2_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"r$Xumf1bYtNUKBSNu~?G!i7iPt=o]B;N%8zZ);C:pfnki/TuOD2bFkf26?_,;/n>f^^Q!Z8u"},{"name":"Child_2_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghijhikef","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"W%;o65~t7e17I$Exh#1jok1uK!mbs?c5vo}(gH]Z#A5u!E1b!]{:hLU4"},{"name":"Child_2_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"li/ooni2-_,?]QC>Z74jSK5uB0mbYnpKJXRP),:4k24u>21brk$8(bV4UsN[u~?Gny7i1t=oD,/:"},{"name":"Child_2_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"=H/o(*Z[/e-QombNJSFj7z9u?8mblUJWBQe:,A;xc*>j7J3u=Z1bO%W[.?7=}]D0v)Hx;q&u"},{"name":"Child_3_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghijkilmf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"NM/o4l$8s=o#X=8.O-6xjOqlLHVu/4mbiAH/Do3)RhPKA08u^>1bfLrHrFwCKL=w"},{"name":"Parent_3","color":"#ffffff","opacity":1.0,"verts":"1abcdedfgadeeabg","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RaTu412b?B;N~.T07sVTSglkdJ=ogI>NLi|y"},{"name":"Child_3_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":">j/o^%~tHX8JuA.z2myx,#rl/>;o[B;N$)@C(On#n|5j[h=o|ri2eQU_sLcG`*Qk5-5uYS1bW/O["},{"name":"Child_3_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"C?;o`n$8*C>T!-x1rLxAy6flHr/oQkf2c2}*11(?+,Wj8l=o-`D&6&Lwb&=w(J%QbYHk3A3u"},{"name":"Child_3_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghighjdek","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"C-;o973AcX8JB>TvS&:IjV0kzM/o~KrH%dJ%[A1L+OfjhNYu?41bfUjH"},{"name":"Child_3_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"K?;o6?Z[e`9KunHY@:^jGW8uO7mb&K/SyuhKYc7Ni/Tuu9mb~Wc,{M&*HpW#l;6iqC$u{I1b!t}1"},{"name":"Child_3_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"`j/o}vi215a_p+|3lfRkU/5uP6mbRquNY8hxt_^PmC>ifI/o/43A2c$%o|f=|/BxRlsly6Uu"},{"name":"Child_3_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghijkilmf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"0M/oeM>Nvz3GfgF[{x@kI!4u)3mb)bV4EICKkrPSKAMjeg/o-{{:8~w)z1?XYOK8"},{"name":"Child_3_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"K;/oh33ANQ.Yp+|3Vn]kB44uKe1b}B;N/BwX&G!Ro$nN9MUuZP2bEoi2=Y]=Sr^D;>x6GN1u"},{"name":"Child_3_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"Ia=o(^{:=hfEunHYy>XkkY5u{I1bqkf2&Dj?(HWDJH`LA]Tu,X2bnTZAb&=w3vgK)l6k>N/okct&"},{"name":"Child_3_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghighjdek","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"km=o3i$8+)gF84UvhLbk{r8u?41bKKrHP7F.V4o+Jo$FhNYuD7mbhLU4"},{"name":"Child_3_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"Oa=of!~td&Z{!-x1VQiKmH6k3A3u~2mb.@6IewmRyXRPA>hjO~!up7mb[yq$sGM!ZcwRHeZu"},{"name":"Child_3_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"X;/oHbE&gahFuA.z,w/C,/clGN1uy3mbyG^WSxKEbE{CF!4uBh2bz3{to|f=RS84?y;j/>;oyL%N"},{"name":"Child_4_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghigjkdlm","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"HM3ub51b4l$8_/o#{u%,#p8CiVRPN|1u$e2b=23A`6dDaRsGZFaTO-6xjOql"},{"name":"Parent_4","color":"#ffffff","opacity":1.0,"verts":"1abcdeefabcabeee","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RaTu412bgI>Nh#|y,BH=6sVT(`1u"},{"name":"Child_4_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RM2u*a2b0BQUh-S^}]D0-AN4d(9jXO/oxSuHFrs%12LJcE{CY.Qi,{$uYS1bl*Z[H(Lwf0`{"},{"name":"Child_4_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"r$Xu%r2bc!~tg]h8,;|_#pgZmJ.jyK/oKg$89IW,sD#xJXRPWUlx.Nsl3A3uUU1b!DQUnogF"},{"name":"Child_4_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghijhikef","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RaTuOD2b`]{:Qh60rB4+V+fSe0Ckkn/o}>{:-.|y?hIJvo}(yIWM"},{"name":"Child_4_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"li/ofvi2&RXDg5e+8%|M4DJjdB0u.2mb,Z$M|([L{i=vKH`LyJhj[,!u{I1b4ui2rR_>Z0.0"},{"name":"Child_4_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"=H/o3/Z[9U3GnkQSF0QJeg=iic$uTu1bYE>Nf7K>,5f[P43@q,UP^-Nky6UuFC2bvSuH>hD:"},{"name":"Child_4_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghigjkdlm","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":")O/od0~tmJpK[LHw&U|zR}NiEq%uqW1bt@{:?RETXI#.EICKkrPS{x@kI!4u"},{"name":"Child_4_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"=H/o&*Z[61$M./g%}]D0[fEx?Gsl7J3u!Z1bQDQU*,W5BQe:UjAxka{PGN1u&i2bI;Z[XW&("},{"name":"Child_4_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"li/ooni2amBRcDSN,;|_wVCAyGglh+2u(]1b};Z[aI~zJXRP%$+4m>9j>N/o%aE&vgKvr7._"},{"name":"Child_4_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghijhikef","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RaTui`Zbp}{:=wC-g5v6HK@w2P_1+OfjAq0uz-1bqkf2b&=wyIWM"},{"name":"Child_4_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"r$Xurf1bco$8:,D:M*pR|S1PxZcX,TJiey#uJ&1b0KrH%8zZj87:)F=THeZu]k1bXwi2],Pz"},{"name":"Child_4_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RM2u;B1b1N>NmXOZg-~4}dtYW0.RZ|Wu;z2b0^{:)NiGP43@5EOL13Zk/>;oEE>NZ1T3HkTD"},{"name":"Child_9_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghigjidkf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"oz%uk,Zb45~t#X8JlFYZrB4+R=*IX4]jhNYu*o2b)B;Nb&=wyIWM"},{"name":"Parent_9","color":"#ffffff","opacity":1.0,"verts":"1aaabcdaeadfcdbg","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"f-6uNW1bI_A&~?Tv,duGSglk?E/o8.D&guJv"},{"name":"Child_9_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"F&$u#z1bmni2A1T3k6y#;/n>c9$Qrd9ji/TutD2bw33A]KdDSpW#rCuTDXflHr/oZni2Hw;-"},{"name":"Child_9_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"Oy#uLZ1b$*Z[]te.F0i$*s-EQ?kYQ^/j,c/ouN>NK4*PKEgYp$nN@WSj#u%uH3mbWIpK[5?0"},{"name":"Child_9_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghijhklem","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":">H9uE71bc0~t=c,X/5uWCYy[,)r4*Wck3E/o!,{:d+xP^W9>-g5QLGF83:Ni"},{"name":"Child_9_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"yX6uLZ1b2/Z[L#U_:UyxDC1yb,[kD`8uT7mbw7dD,30R=;&@mC>ijLUu%I2brqi2VLuN!=?M"},{"name":"Child_9_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"Bb5u#z1bfvi2eD>T$8i$u~?GJ0XkU.!up7mbaUq$qo1-22kwz^exbqKi6B0uM61b*~D&~ey*"},{"name":"Child_9_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghigjidkf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"y83uT2mbJgKvhrDZ9Qixh#1j4c6u-M2bETZA5(=wBRy:Ko$Fh#1j"},{"name":"Child_9_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"~c5ua5mbKR_>oH-Gz&3=Z74jS(1u@X2b=$W[5(=w6tgRM1u4+,Wjh3Yud;1bcH>NHR_>tCBF"},{"name":"Child_9_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"o16u~6mbt={@vVcH/]a5JSFji[WuhQ2b}?{:/-]=SqXS}1}Rp$nN&1;jE54uKe1bON>Nvz@/"},{"name":"Child_9_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghijhklem","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"OS9uU7mbSI((Ydq^z]z.k64iYqUu+G2bC-Z[zRET0`*Wy!k!y?oXAn/j/}!u"},{"name":"Child_9_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"iF#u~6mb=/{@8|T0L%>vDC1yS9Li6]9ul71bkRuHjxV4LpUMDLcG=L-3Xm`j~A/ot=Z[j=hG"},{"name":"Child_9_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"C]$ua5mb-Q_>(!?0o?~#u~?GsD7i%c7u>21brk$8Ii/->q+zz^exKE_k388uO7mbi7/SXKMz"},{"name":"Child_10_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghigjidkf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"%33uk,Zb73{t!B%PIn&vAIWMS`5uKM2bEg$8{E$MPcW-+OfjzM/ofUjH"},{"name":"Parent_10","color":"#ffffff","opacity":1.0,"verts":"1abcadceffbcgeef","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"b3&uNW1b8.D&%/JvoxPS6sVTf-6ua%mbT&_w"},{"name":"Child_10_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"K~4u#z1b6kf2*Rrxs~%:7%|ME$1uMR2bPvQU{E$M[qtQKem4h+2uP5mbsrs%%HI1t~?GJ&9u"},{"name":"Child_10_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"5V6uLZ1bI%W[[tXxtv+3E0QJH>WuyP2b!B;N6Oe:QcnynQNkXO/o)KrHdDSN`q]{vhUi7k=oyL%N"},{"name":"Child_10_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghijhklem","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":">H9uE71by3{t&6e+K=,_%U|z=nUuaG2bgtNUEq=XA!)D*Wckx?/o?0~t5?Oy3j}C"},{"name":"Child_10_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"iA#uLZ1ba%W[/YIYvZB{vhUij:;o[l$8b9!LE43@!7Sjt?4u34mb[Y]=m2?wvZ#RJSFje^/o>3RA"},{"name":"Child_10_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"C=$u#z1bckf2,A&Yd:5!WNnjj,;o0K>NH%I=HpW#bAjkz93u*~ZbE/_:8%3Po)wG7%|MWC5u"},{"name":"Child_10_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghigjidkf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"ct&uT2mb#/Jv7HsQ6q@1qg3uz6mb,*QzzSi&Jo$F(o0u!E1b!]{:hLU4"},{"name":"Child_10_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"`>$ua5mb+v_>%J;#o[>W3A3uV8mb{]y*f_)^y^exQw#u2_1bD`D&@yq$%mu:w};6WNnjr,;o^k28"},{"name":"Child_10_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"LD#u~6mb#2{@2dI60:*RGN1u50mbuUq$NC$GsLcG,f=k|@9ul71b9KrH4ZHP3oVvCC1y[}Tu"},{"name":"Child_10_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghijhklem","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"OS9uU7mbsn((IcP:dr6PLHVug#mb`9[V/L@GVMYR>yKkw&#u?4mbc>1F!/=!k@%x"},{"name":"Child_10_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"=26u~6mb&2{@P,%w^]RPvhUiIl=ocDQUyfY.o|f=@i1PChqlZ|Wuy3mbcpZE)xOTE0QJz]Wu"},{"name":"Child_10_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":".l5ua5mb/v_>4eT_t}xRWNnj:./o8>Z[*&sMh7zZ*bgGV[Elr-;o5;_:+~xYpxJ>Z74jBD/o>3RA"},{"name":"Child_5_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghijkilmf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"wi3u90mb^2o#qgF[T4p4I64u)3mbxxV4wQ$E{iwSKAMjiIXuK#mb*`gFNWhKYfB8"},{"name":"Parent_5","color":"#ffffff","opacity":1.0,"verts":"1abcdbefgghedfgf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RaTua%mbK1,w~.T0`9Uv(`1u4^1b^_A&^`~G3duG"},{"name":"Child_5_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"ek8uo9mbj-S^A+|3+AN4@03uKe1bQJ>N={r%G4OQp$nNY.Qi7x=oz7~t,-]=L#/I+[d6GN1u"},{"name":"Child_5_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"MY0uF8mbg]h8FnHY!pgZZT5u{I1brpi2enW,b$BCKH`L$bKi]z=osb087(=wtN9LJQ5k>N/okct&"},{"name":"Child_5_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghighjdek","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"^w#u57mbJC60{?Tvt:I5e0Ckqg3uLh1bq,A&?hIJko}(+OfjzM/ofUjH"},{"name":"Child_5_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"4Z0uG8mb2c,XD;x1sP`Ls$5k3A3uj`ZbrLrHhj5zJXRP(G`F[,!up7mbMUq$>q+z,MnRHeZu"},{"name":"Child_5_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"~l8uq9mb&C60>B.zq.0D,jclGN1u[c1bYtNUA4f[cE{CuG;jE[/oEkf2/}f=`3%G?X:j/>;oyL%N"},{"name":"Child_5_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghijkilmf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"Jl3u&0mbWU3Go?8.o1?XjprlLHVu5x1bF/_:]G#.ShPKkkKkj9/oteE&Rh60KQry"},{"name":"Child_5_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"7`Xuw#mb;wC-=B.zg8kT?Gsl/>;oCI>NmT+*o+T$n|5j&#!uA8mbIn|ZDLcG_tpYr>5uYS1bW/O["},{"name":"Child_5_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":";&Uug$mb7Wc,B;x1=5],yGglHr/o}si2.SZ{F/i[+,Wj@w#u87mbhOg78(=wADIP%yIk3A3u"},{"name":"Child_5_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghighjdek","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"z@Tu:$mbVbC-+4UvW>?IE%0uD7mbCxV4VCG>X_$QhNYu!E1b!]{:hLU4"},{"name":"Child_5_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"Y(Uuh$mbS!D:FnHY@A,Qa88uO7mbH7/S`7-XcUJPi/Tu>]1b>KrHU6={SpW#o)EAnH$u{I1b!t}1"},{"name":"Child_5_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"4bYuy#mb_BOZA+|3o.sYo{5uP6mbiMuN*!GZ1vbQmC>i}R2u}0mbGu0K*}f==87TCvEly6Uu"},{"name":"Child_6_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghigjkdlm","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"HM3uE7mbKUq$6Cg-rYy[i1NiEl%u&6mbpwET7HsQZ+M5A08u^>1bfLrHrFwCKL=w"},{"name":"Parent_6","color":"#ffffff","opacity":1.0,"verts":"1abcdedcafgafeed","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RaTua%mbK1,w5|T0:BH=Sglkb3&u)6mbLi|y"},{"name":"Child_6_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RM2um5mb@I((-qiXCC1yE.TuhR2bltNUo|f==2FLwKYk,c/oxC;NiB{I.@{zE0QJYu9u&/1b!t}1"},{"name":"Child_6_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"r$XuK3mb:L:+=iJxt~?G&VVu7K2b{;_:h7zZ-fvT3Emki/Tus#mb:&sMjv.(!/n>r#^j$U8u"},{"name":"Child_6_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghijhikef","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"W%;o.2{tWApC7ekwh#1jVy/o{=Z[N8f{ko}(h$3k&v5u!E1b!]{:hLU4"},{"name":"Child_6_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"li/ockf2@[GXo;h=Z74j+2/o}ti2Ck!$yXRPD/^kw83u>21b0b08j=2:X%r@t~?GSWVu+K2byL%N"},{"name":"Child_6_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"=H/oa%W[[}(ZJ]8LJSFjg^/o{aE&[Q_>6Oe:Td(3Pe>j7J3ua7mbr$nJ.mc7>]D09yLi~w%u"},{"name":"Child_6_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghigjkdlm","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":")O/oy3{t6E4=)i!3k64i/j=oh23AUlBREq=X&%mX)0dkeg/o-{{:8~w)z1?XYOK8"},{"name":"Child_6_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"=H/oI%W[>o&Fbch+CC1yAj#uY&1bcAQU^KdD>77xW:#XmC>iJ=;oio$82EA+7s-EBq=i*d$u"},{"name":"Child_6_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"li/o6kf23$ZJz0*Gt~?GT*9uh;1bki$8>yq$5;m:;#v4i/Tu}2mblG!$PHEL7%|M[(1unq2b>3RA"},{"name":"Child_6_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghijhikef","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"W%;o73{t}[[5-N({AIWMqe6uIb2bg8~t{E$M0`!:x|G7hNYuD7mbhLU4"},{"name":"Child_6_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"r$XuE!mbZI((vyd|!/n>6+JjZF0u*~Zb5;_:+nbX2Eqx+,WjJo/o:vi2CKK>:;|_1bYk-Z5u"},{"name":"Child_6_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RM2ud0mb~wC-(y~07s-ENP=iih$u34mb/Y]={l/53Qx87J3ur8mbH4*PR4y#CC1y]q#u;&1bRCFU"},{"name":"Child_8_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghigjkdlm","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":")O/oy3{tTOV$mdEYLHVuj3mbaF$M$|B_RhPKiIXuK#mb/)gF!oQJ2tck4j=o}B;N}s9M"},{"name":"Parent_8","color":"#ffffff","opacity":1.0,"verts":"1aaabcdecdfaacdb","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"d$/o#_A&2|T084Uv_3Jl(`1u4^1bkct&"},{"name":"Child_8_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"=H/oa%W[zM.S}X:4vhUi~-;os,A&-zb)E43@;RSj~./o}?{:[Y]=97Xwd)/j~A/oM%W[cUzGIy8R"},{"name":"Child_8_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"li/ockf2F1pTb^#7WNnjb,;oWtNU*aTFHpW#Tfjk$$/o+sNUb&=w83%4d73uO7mb$K/Sj+`MbYHk"},{"name":"Child_8_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghijhikef","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RaTu{2mbw9^v*ekwAIWMNh1uH!mb2]f{b&=wAV/Z&v5uJ5mb}E$M(A4+"},{"name":"Child_8_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"r$XuL3mbRquNz;h=7%|M$B5uv0mbAF!$b&=wQa(4w83up7mb@yq$u5--~ZmkHr/ofkf2{D;Yy!*6"},{"name":"Child_8_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RM2un5mb5EA+U]8LE0QJSw9u-8mb-v_>sLcGR^/k$Y/o_B;No|f=rAJL0>9uH3mbYnpKh6-SRlsl"},{"name":"Child_8_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghigjkdlm","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"HM3uG7mb3npK[i!3%U|zw|!ur8mby]ARVMYRkkKkj9/oY_A&lztREGV5~oUuw$mb~ZMx"},{"name":"Child_8_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RM2uc0mb!~w)]bh+vhUi/k=oJkf2)[EFo$nNI94uS0mbrn((sLcGNJRi`x=orqi2NquNHr^D&Fcl"},{"name":"Child_8_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"r$XuE!mb*NiGo0*GWNnj!./oH3{t9cp:JH`LQ3Yuf#mb[%Z{b&=wgXqxdt&uM61b!_A&?KR+h}p1"},{"name":"Child_8_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghijhikef","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"W%;o73{tE@[5So#Nqg3u_8mbB31F{g$x+Ofje];o)kf2J$GZvo}(yIWM"},{"name":"Child_8_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"li/o6kf2gVCM:1yQ3A3u66mbmc{x}3u>,TJi*-;o*3{tgwmRHpW#A>hj`j=ovyQU/v_>hGM!cA{j"},{"name":"Child_8_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"=H/oI%W[Rs2M$:qTGN1uZ4mbLN9#9F(5bE{C7OUus$mb&#.Yo|f=P>1P.e9uKe1bzC;Np[YyI?TP"},{"name":"Child_11_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghigjidkf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"]z=ovmi2#/Jv:_PP+r0kqg3ux6mb-ET3CM|KJo$Fdm0uJ5mb}E$M(A4+"},{"name":"Parent_11","color":"#ffffff","opacity":1.0,"verts":"1abacdeaaaecdefg","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"d$/oPbE&};X.dxPS~@yidJ=ogI>N`,|yj:Tv"},{"name":"Child_11_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"mw=o{f$8+v_>hq}!tQHk3A3uU8mb:)gF}=I.y^ex-t#uG9mb]KdDHpW#Bajkct=oskf2R]6Ts@vA"},{"name":"Child_11_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"`l=oTzQU#2{@$aV5:v~jGN1u40mbYWQzejvAmC>i_h=o)TZAKEgYo$nN#N2uy$mb]BOZ>]D0-jLi"},{"name":"Child_11_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghijhklem","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"{^/o4RuHsn((T`2-,R;jLHVue#mbI%I=(!F8KAMjx?/o83{tzV9>z!)D5n%uk3mbLi|y"},{"name":"Child_11_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"G!/oY-Z[&2{@`o[v_P:j/>;oyC;NKiz@#T8X7J3up8mb{BOZ=;&@mC>iy=;oH/_:/gFD7s-E-{/i"},{"name":"Child_11_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"(Z/oo}D&/v_>*2)^P$.jHr/o3kf2Ek0C5Qr4h+2uQ5mboT+*22kwy^ex$@Tuq!mbBrLX+(pR,ydK"},{"name":"Child_11_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghigjidkf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"GQ/o:$W[B>Tv`&;49p8uD7mb(bV4GT:597jlkn/o9;_:T{+@vo}(yIWM"},{"name":"Child_11_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"[Z/oUKrH!-x1.=71zD0uO7mb#K/S1}LM}PElr-;o5;_:rNORM1u4+,Wjyo/o6b08Fkb+:;|_g-Xk"},{"name":"Child_11_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"1!/on%W[uA.z^LgWHe$uP6mbNquNV@`DT=plZ|Wux3mbO)7!}1}Ro$nN*94uo8mb1iPyAj7w*{T4"},{"name":"Child_11_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghijhklem","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":")_/o)_A&X=8.4l0M5s%u)3mb$bV4WiAY{H~kN|1u?4mbA31Fn!k!>yKk#X/o>TZA7?KR"},{"name":"Child_11_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"Tm=oitNUuA.z:g,E+p&uKe1bZB;N~C4=ArGZn|5jvI/o*KrHLpUMsLcG;v=k06/o];_:L*~4WqsY"},{"name":"Child_11_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"tx=oUKrH!-x1}r;y+H$u{I1bfkf2/mC#C]}T+,WjA#/oc/_:>q+zy^exNy#uB0mbIN9#!/n>]l,j"},{"name":"Child_12_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghigjidkf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"bQ/o;D>NJgKvdA%Pe-bWh#1jS`5u^#mbMCM?5(=wPcW-+OfjzM/ofUjH"},{"name":"Parent_12","color":"#ffffff","opacity":1.0,"verts":"1abcadceefdcgeff","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"dJ=ogI>Ne#|y84UvO*Mjd$/oPbE&*fY./22/"},{"name":"Child_12_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"VZ/o{f$8KR_>kQrx:>.ZZ74jE$1uA$mb7,W55(=w)qtQ?2?kyK/oKg$8/{r%wf)RWNnjJ&9u"},{"name":"Child_12_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"v!/oTzQUt={@tsXxiQq6JSFjH>Wul$mbL)7!DLcGPcny7}8uT7mbw7dDKBSN(m$Ny6UuuC2byL%N"},{"name":"Child_12_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghijhklem","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"{^/o4RuHSI((g5e+LGF8k64i=nUuL#mbR-_X7MYRz!)Dam6u=e2bE3{t[5uW3j}C"},{"name":"Child_12_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"km=oY-Z[=/{@oXIYi:V8y6Uu0`Zb;b08Ir@4p$nN!7Sj9Y/of3{tBQe:b2?w4R~jGN1u5i2b>3RA"},{"name":"Child_12_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"/w=oo}D&-Q_>xz&Y!;+6HeZu0k1bfC;NA,a:KH`LbAjkNQ/oU(Z[61$Ma$3PS3/WZ74jWC5u"},{"name":"Child_12_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghigjidkf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"FG=o^2{t_?TvVHsQS_0kzM/oIQuHYWQz,hrM+Ofj(o0u!E1b!]{:hLU4"},{"name":"Child_12_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"|w=oUKrHB;x13J;#nlIk>N/o0aE&68y*xp({,TJiQw#uI9mb4F!$%8zZ3mu:!sglHeZu*k1b^k28"},{"name":"Child_12_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"Hm=on%W[>B.zQdI6:|~j~A/os=Z[@yq$ZiaDcE{C,f=kL{/oOi$8o7dD.XHPcmw0vhUi[}Tu"},{"name":"Child_12_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghijhklem","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":")_/o)_A&q?8.xcP:An/j_^;opWuH1N[Vy!k!ShPK>yKksp=oN*Z[C31FK]z.k@%x"},{"name":"Child_12_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"$!/oitNU[B.zE,%wzl;jy6Uu|C2bGtNU#3Q8P43@?i1P;i%uTu1b1E>NG,YE^>P5JSFjz]Wu"},{"name":"Child_12_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"Z1/oUKrHF;x1SeT_PN{jHeZuIm2bW%W[n=zXSpW#)bgGAv&u.2mb,Z$Ml}xYLqu13A3u[U1b>3RA"},{"name":"Child_1_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghijkilmf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"wi3uFj2bltNUo?8.YllX1fB8LHVuJx1bh&~teahF`r=X;oQJ{iwSY@?kI64u"},{"name":"Parent_1","color":"#ffffff","opacity":1.0,"verts":"1abcdbefffbedffg","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"W%;o0(~toF,woxPSa0UvO*Mjf-6uB9mbCtX."},{"name":"Child_1_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"V|XuVD2b9KrH=B.zN5xSzTR8vhUiCN2uYm2b@]{:W7dDiB{I.@{zcE{C`*Qk5-5uP6mb-ZtN"},{"name":"Child_1_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"8#UuuO2b`$W[B;x1vqo,)W&6WNnjm66uA_1b!zQUVUq$%ceK%n0.,TJi|A5u2d2b#KrH1#pR"},{"name":"Child_1_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghighjdek","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"3=Tu(X2b3MuH.fKvuqTDP=c.BIWMh$3k&v5u!E1b;;_:b&=wyIWM"},{"name":"Child_1_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":">$UuGO2bVxQUqR_>9xx[zO|F8%|MD/^kw83u*~Zb2_{:~Wc,CL&*KH`Ll;6iqC$u$5mbn6^>"},{"name":"Child_1_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"P~Xu(D2bhRuHx={@3fjN+8]ZF0QJR^/k/?4u34mbk:]=0@:Jh/e$n|5jB|TuBR2b;sNUif7w"},{"name":"Child_1_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghijkilmf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"Jl3uok2bi:Z[?I((1u>L>Qry&U|zkkKk,t6u&6mbzRET-AtRW/vUT^!xjprl"},{"name":"Child_1_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":")m8uk]1b,h$8H={@|:=,>!ywvhUiI94ueh2bz3{t*}f=*>z5v6g8Z|Wu^t1bC&~tNid5t%~4"},{"name":"Child_1_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"X20uW*1bVxQUHR_>PC$G?czTWNnjQ3YuNB2bo%W[!8zZ-]oR]UE0,TJi[(1unq2bE13Ae:;S"},{"name":"Child_1_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghighjdek","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"fA#un91bpb08{?TvO(u6?QpWqg3u5h1b0wi2:{r%vo}(Ko$Fh#1j"},{"name":"Child_1_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"D30u5*1b`$W[D;x1hS>Mbft13A3uF`ZbR(~tsZCSJXRPeAfGX1@kh+2uGm2b)SuH>tx)z>6T"},{"name":"Child_1_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"#o8uH]1bUb08>B.zcJMEyiE6GN1uld1bBXuHU#.YzQe:48qy`d+Xn|5j]q#u;&1b]vQU,WoK"},{"name":"Child_7_1","color":"#a5cde3","opacity":1.0,"verts":"1abcdefghijkilmf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"NM/o-b088Cg-fgF[Y@?kmX/oE)Z[)bV4!oQJ2tck3E/o*;_:EPsGZ+M5xmUut$mbtIP1"},{"name":"Parent_7","color":"#ffffff","opacity":1.0,"verts":"1abcddebfadddabf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"W%;o+3{t882/dxPSSglkf-6u)6mbLi|y"},{"name":"Child_7_2","color":"#1f78b3","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"r;/oxtNU-=(Gp+|3T![kYQ/o@$W[Aj7w:uRPd}8uT7mb@KdDBiN4)tol,c/o!B;NL#/I-[d6JSFj"},{"name":"Child_7_3","color":"#b2df8a","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"na=oF3{t0sm$unHY[OXko4/on3{tR]6T#n}Fv_!up7mb=yq$2VNQ.Nsli/Tu36mbYBc,z`W/5%|M"},{"name":"Child_7_4","color":"#339f2c","opacity":1.0,"verts":"1abcdefghighjdek","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"@l=o~;_:J=D$84Uv6|akL;/oDkf2N3v6v^Jzb1$uJ5mbk1$M7(=w(A4+"},{"name":"Child_7_5","color":"#fa9999","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"va=o~B;Ng5e+pCGE_%1uq!mbs9^v!/n>JlKiiG=onTZAb&=w(G`F[,!u>21b;b08>q+z.MnRWNnj"},{"name":"Child_7_6","color":"#e3191b","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"E;/oC%W[nkQS`cEL{?Wu5#mb;{r%7s-EluRi@x=oz7~t?Y]=&5Dx^-Nk7J3um#mb!TLw]&;vAC1y"},{"name":"Child_7_7","color":"#fdbf6e","opacity":1.0,"verts":"1abcdefghijkilmf","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"0M/opC;N[LHwt/sN~oUuw$mb4qNxrYy[Uq_i3o=o5Z3AswETtICK)0dk/j=oXTZA},A5"},{"name":"Child_7_8","color":"#ff7f00","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"hk/oE/_:D;g%`cELS}TuA$mbgli8Aj7w[#KLG@9ul71beLrH=oXSla{PmC>io^/oz%W[E.d@C0QJ"},{"name":"Child_7_9","color":"#cab2d6","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"Y?;oYtNUKBSNpCGEPYVu:#mb(IpKR]6TDiAT:.6u>21b_b08R]6Tby$Ni/TuZ8mb(/JvS;?GZ74j"},{"name":"Child_7_10","color":"#6a3d99","opacity":1.0,"verts":"1abcdefghighjdek","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"U-;oP/_:!jtT`9Uvok1uK!mbTid5N3v6gH]Z#A5u!E1b;;_:b&=wyIWM"},{"name":"Child_7_11","color":"#ffff99","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"4?;o~b08aqATunHYlh,j|>/o)I>N&K/S^w.KtR:ji/Tuw9mb(bV4JsN[+,WjC,;o(kf2kZ,3r~?G"},{"name":"Child_7_12","color":"#b15927","opacity":1.0,"verts":"1abcdefghijklmno","facets":"1abcacdade","wires":[],"faceColors":[],"facesToFacets":[],"floats":"vk/ozC;N{k->p+|3nURks7/oFZ3ARquN,A;xc*>j,c/o[B;NIoAT-nIZ7J3uc3mb/ET3V{lwvhUi"},{"name":"QEGG_Core","color":"#cccccc","opacity":1.0,"verts":"1abcabdeeebdaeefdagcagfefgdafeecabdabagdagceffbcaefeffegcafff","facets":"1abcacdadeaefafgaghahiaijajbbjkbklblcmnomopmpqmqlmlkmkrmrsmstmtntgftfotonclqcqpcpddpodofdfehgthtshsiisrirkikj","wires":[],"faceColors":[],"facesToFacets":[],"floats":"RaTu412b?B;N4|T0oxPS6sVTf-6ua%mbT&_w"}],"compressed":true,"base":"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!#$%&()*+-:;/=>?@[]^_,.{|}~`","baseFloat":",.-0123456789"};

            // Z is up for FreeCAD
            THREE.Object3D.DefaultUp = new THREE.Vector3(0, 0, 1);

            const defaultWireColor = new THREE.Color('rgb(0,0,0)');
            const defaultWireLineWidth = 2; // in pixels

            const raycasterObj = []; // list of obj that can mouseover highlight

            const canvas = document.querySelector('#mainCanvas');

            const scene = new THREE.Scene();

            const renderer = new THREE.WebGLRenderer({
                alpha: true,
                antialias: true,
                canvas: canvas
            }); // Clear bg so we can set it with css
            renderer.setClearColor(0x000000, 0);

            let renderRequested = false;

            // HemisphereLight gives different colors of light from the top
            // and bottom simulating reflected light from the 'ground' and
            // 'sky'
            scene.add(new THREE.HemisphereLight(0xC7E8FF, 0xFFE3B3, 0.4));

            const dLight1 = new THREE.DirectionalLight(0xffffff, 0.4);
            dLight1.position.set(5, -2, 3);
            scene.add(dLight1);
            const dLight2 = new THREE.DirectionalLight(0xffffff, 0.4);
            dLight2.position.set(-5, 2, 3);
            scene.add(dLight2);

            if (data.compressed) {
                const base = data.base;
                const baseFloat = data.baseFloat;

                function baseDecode(input) {
                    const baseCt = base.length;
                    const output = [];
                    const len = parseInt(input[0]); // num chars of each element
                    for (let i = 1; i < input.length; i += len) {
                        const str = input.substring(i, i + len).trim();
                        let val = 0;
                        for (let s = 0; s < str.length; s++) {
                            const ind = base.indexOf(str[s]);
                            val += ind * Math.pow(baseCt, s);
                        }
                        output.push(val);
                    }
                    return output;
                }

                function floatDecode(input) {
                    const baseCt = base.length;
                    const baseFloatCt = baseFloat.length;
                    let numString = '';
                    for (let i = 0; i < input.length; i += 4) {
                        const b90chunk = input.substring(i, i + 4).trim();
                        let quotient = 0;
                        for (let s = 0; s < b90chunk.length; s++) {
                            const ind = base.indexOf(b90chunk[s]);
                            quotient += ind * Math.pow(baseCt, s);
                        }
                        let buffer = '';
                        for (let s = 0; s < 7; s++) {
                            buffer = baseFloat[quotient % baseFloatCt] + buffer;
                            quotient = parseInt(quotient / baseFloatCt);
                        }
                        numString += buffer;
                    }
                    let trailingCommas = 0;
                    for (let s = 1; s < 7; s++) {
                        if (numString[numString.length - s] == baseFloat[0]) {
                            trailingCommas++;
                        }
                    }
                    numString = numString.substring(0, numString.length - trailingCommas);
                    return numString;
                }

                // Decode from base90 and distribute the floats
                for (const obj of data.objects) {
                    obj.floats = JSON.parse('[' + floatDecode(obj.floats) + ']');
                    obj.verts = baseDecode(obj.verts).map(x => obj.floats[x]);
                    obj.facets = baseDecode(obj.facets);
                    obj.wires = obj.wires.map(w => baseDecode(w).map(x => obj.floats[x]));
                    obj.facesToFacets = obj.facesToFacets.map(x => baseDecode(x));
                }
            }

            // Get bounds for global clipping
            const globalMaxMin = [{min: null, max: null},
                                  {min: null, max: null},
                                  {min: null, max: null}];
            for (const obj of data.objects) {
                for (let v = 0; v < obj.verts.length; v++) {
                    if (globalMaxMin[v % 3] === null
                        || obj.verts[v] < globalMaxMin[v % 3].min) {
                        globalMaxMin[v % 3].min = obj.verts[v];
                    }
                    if (globalMaxMin[v % 3] === null
                        || obj.verts[v] > globalMaxMin[v % 3].max) {
                        globalMaxMin[v % 3].max = obj.verts[v];
                    }
                }
            }
            let bigrange = 0;
            // add a little extra
            for (const i of globalMaxMin) {
                const range = i.max - i.min;
                if (range > bigrange) {
                    bigrange = range;
                }
                i.min -= range * 0.01;
                i.max += range * 0.01;
            }

            const camCenter = new THREE.Vector3(
                0.5 * (globalMaxMin[0].max - globalMaxMin[0].min) + globalMaxMin[0].min,
                0.5 * (globalMaxMin[1].max - globalMaxMin[1].min) + globalMaxMin[1].min,
                0.5 * (globalMaxMin[2].max - globalMaxMin[2].min) + globalMaxMin[2].min );
            const viewSize = 1.5 * bigrange; // make the view area a little bigger than the object
            const aspectRatio = canvas.clientWidth / canvas.clientHeight;
            const originalAspect = aspectRatio;

            function initCam(camera) {
                // XXX this needs to treat the perspective and orthographic
                // cameras differently
                camera.position.set(
                    data.camera.position_x,
                    data.camera.position_y,
                    data.camera.position_z);
                camera.lookAt(camCenter);
                camera.updateMatrixWorld();
            }

            let cameraType = data.camera.type;
            const persCamera = new THREE.PerspectiveCamera(
                50, aspectRatio, 1, 100000);
            initCam(persCamera);
            const orthCamera = new THREE.OrthographicCamera(
                -aspectRatio * viewSize / 2, aspectRatio * viewSize / 2,
                viewSize / 2, -viewSize / 2, -100000, 100000);
            initCam(orthCamera);

            function assignMesh(positions, color, opacity, faces) {
                const baseGeometry = new THREE.BufferGeometry();
                baseGeometry.setAttribute('position', new THREE.BufferAttribute(
                    positions, 3));

                // EdgeSplitModifier is used to combine verts so that smoothing normals can be generated WITHOUT removing the hard edges of the design
                // REF: https://threejs.org/examples/?q=edge#webgl_modifier_edgesplit - https://github.com/mrdoob/three.js/pull/20535
                const edgeSplit = new EdgeSplitModifier();
                const cutOffAngle = 20;
                const geometry = edgeSplit.modify(
                    baseGeometry, cutOffAngle * Math.PI / 180);
                geometry.computeVertexNormals();
                geometry.computeBoundingSphere();

                const material = new THREE.MeshLambertMaterial({
                    color: color,
                    side: THREE.DoubleSide,
                    vertexColors: false,
                    flatShading: false,
                    opacity: opacity,
                    transparent: opacity != 1.0,
                    fog: false
                });

                const meshobj = new THREE.Mesh(geometry, material);
                meshobj.name = meshobj.uuid;
                faces.push(meshobj.uuid);
                scene.add(meshobj);
                raycasterObj.push(meshobj);
            }

            const objects = [];
            for (const obj of data.objects) {
                // Each face gets its own material because they each can
                // have different colors
                const faces = [];
                if (obj.facesToFacets.length > 0) {
                    for (let f=0; f < obj.facesToFacets.length; f++) {
                        const facecolor = obj.faceColors.length > 0 ? obj.faceColors[f] : obj.color;
                        const positions = new Float32Array(obj.facesToFacets[f].length * 9);
                        for (let a=0; a < obj.facesToFacets[f].length; a++) {
                            for (let b=0; b < 3; b++) {
                                for (let c=0; c < 3; c++) {
                                    positions[9 * a + 3 * b + c] = obj.verts[3 * obj.facets[3 * obj.facesToFacets[f][a] + b ] + c ];
                                }
                            }
                        }
                        assignMesh(positions, facecolor, obj.opacity, faces);
                    }
                } else {
                    // No facesToFacets means that there was a tessellate()
                    // mismatch inside FreeCAD. Use all facets in object to
                    // create this mesh
                    const positions = new Float32Array(obj.facets.length * 3);
                    for (let a=0; a < obj.facets.length; a++) {
                        for (let b=0; b < 3; b++) {
                            positions[3 * a + b] = obj.verts[3 * obj.facets[a] + b];
                        }
                    }
                    assignMesh(positions, obj.color, obj.opacity, faces);
                }

                // Wires
                // cannot have lines in WebGL that are wider than 1px due to browser limitations so Line2 workaround lib is used
                // REF: https://threejs.org/examples/?q=fat#webgl_lines_fat - https://jsfiddle.net/brLk6aud/1/
                // This material is shared by all wires in this object
                const wirematerial = new LineMaterial( {
                    color: defaultWireColor,
                    linewidth: defaultWireLineWidth,
                    dashed: false, dashSize: 1, gapSize: 1, dashScale: 3
                } );
                wirematerial.resolution.set(
                    canvas.clientWidth * window.devicePixelRatio,
                    canvas.clientHeight * window.devicePixelRatio);

                const wires = [];
                for (const w of obj.wires) {
                    const wiregeometry = new LineGeometry();
                    wiregeometry.setPositions(w);
                    const wire = new Line2(wiregeometry, wirematerial);
                    wire.computeLineDistances();
                    wire.scale.set(1, 1, 1);
                    wire.name = wire.uuid;
                    scene.add(wire);
                    wires.push(wire.name);
                }
                objects.push({
                    data: obj,
                    faces: faces,
                    wires: wires,
                    wirematerial: wirematerial
                });
            }

            // ---- GUI Init ----
            const gui = new GUI({ width: 300 });
            const guiparams = {
                wiretype: 'Normal',
                wirewidth: defaultWireLineWidth,
                wirecolor: '#' + defaultWireColor.getHexString(),
                clippingx: 100,
                clippingy: 100,
                clippingz: 100,
                cameraType: cameraType,
                navright: function() { navChange([1,  0, 0]); },
                navtop:   function() { navChange([0,  0, 1]); },
                navfront: function() { navChange([0, -1, 0]); }
            };

            // ---- Wires ----
            const wiretypes = { Normal: 'Normal', Dashed: 'Dashed', None: 'None' };

            const wireFolder = gui.addFolder('Wire');
            wireFolder.add(guiparams, 'wiretype', wiretypes).name('Wire Display').onChange(wireChange);
            wireFolder.add(guiparams, 'wirewidth').min(1).max(5).step(1).name('Wire Width').onChange(wireChange);
            wireFolder.addColor(guiparams, 'wirecolor').name('Wire Color').onChange(wireChange);

            function wireChange() {
                for (const obj of objects) {
                    const m = obj.wirematerial;
                    if (m.dashed) {
                        if (guiparams.wiretype != 'Dashed') {
                            m.dashed = false;
                            delete m.defines.USE_DASH;
                        }
                    } else {
                        if (guiparams.wiretype == 'Dashed') {
                            m.dashed = true;
                            // Dashed lines require this as of r122. delete if not dashed
                            m.defines.USE_DASH = ""; // https://discourse.threejs.org/t/dashed-line2-material/10825
                        }
                    }
                    if (guiparams.wiretype == 'None') {
                        m.visible = false;
                    } else {
                        m.visible = true;
                    }
                    m.linewidth = guiparams.wirewidth;
                    m.color = new THREE.Color(guiparams.wirecolor);
                    m.needsUpdate = true;
                }
                requestRender();
            }
            wireChange();

            // ---- Clipping ----
            const clippingFolder = gui.addFolder('Clipping');
            clippingFolder.add(guiparams, 'clippingx').min(0).max(100).step(1).name('X-Axis Clipping').onChange(clippingChange);
            clippingFolder.add(guiparams, 'clippingy').min(0).max(100).step(1).name('Y-Axis Clipping').onChange(clippingChange);
            clippingFolder.add(guiparams, 'clippingz').min(0).max(100).step(1).name('Z-Axis Clipping').onChange(clippingChange);

            const clipPlaneX = new THREE.Plane(new THREE.Vector3( -1, 0, 0 ), 0);
            const clipPlaneY = new THREE.Plane(new THREE.Vector3( 0, -1, 0 ), 0);
            const clipPlaneZ = new THREE.Plane(new THREE.Vector3( 0, 0, -1 ), 0);

            function clippingChange() {
                if (guiparams.clippingx < 100 || guiparams.clippingy < 100 || guiparams.clippingz < 100) {
                    if (renderer.clippingPlanes.length == 0) {
                        renderer.clippingPlanes.push(clipPlaneX, clipPlaneY, clipPlaneZ);
                    }
                }
                clipPlaneX.constant = (globalMaxMin[0].max - globalMaxMin[0].min) * guiparams.clippingx / 100.0 + globalMaxMin[0].min;
                clipPlaneY.constant = (globalMaxMin[1].max - globalMaxMin[1].min) * guiparams.clippingy / 100.0 + globalMaxMin[1].min;
                clipPlaneZ.constant = (globalMaxMin[2].max - globalMaxMin[2].min) * guiparams.clippingz / 100.0 + globalMaxMin[2].min;
                requestRender();
            }

            // ---- Camera & Navigation ----
            const camFolder = gui.addFolder('Camera');
            const cameraTypes = { Perspective: 'Perspective', Orthographic: 'Orthographic' };
            camFolder.add(guiparams, 'cameraType', cameraTypes).name('Camera type').onChange(cameraChange);
            camFolder.add(guiparams, 'navright').name('View Right');
            camFolder.add(guiparams, 'navtop').name('View Top');
            camFolder.add(guiparams, 'navfront').name('View Front');

            function navChange(v) {
                const t = new THREE.Vector3();
                new THREE.Box3().setFromObject(scene).getSize(t);
                persControls.object.position.set(
                    v[0] * t.x * 2 + camCenter.x,
                    v[1] * t.y * 2 + camCenter.y,
                    v[2] * t.z * 2 + camCenter.z);
                persControls.target = camCenter;
                persControls.update();
                orthControls.object.position.set(
                    v[0] * t.x + camCenter.x,
                    v[1] * t.y + camCenter.y,
                    v[2] * t.z + camCenter.z);
                orthControls.target = camCenter;
                orthControls.update();
                // controls.update() implicitly calls requestRender()
            }

            function cameraChange(v) {
                cameraType = v;
                requestRender();
            }

            const guiObjects = gui.addFolder('Objects');
            for (const obj of objects) {
                // Ignore objects with no vertices
                if (obj.data.verts.length > 0) {
                    const guiObjData = {
                        obj: obj, color: obj.data.color, opacity: obj.data.opacity };
                    const guiObject = guiObjects.addFolder(obj.data.name);
                    guiObject.addColor(guiObjData, 'color').name('Color').onChange(GUIObjectChange);
                    guiObject.add(guiObjData, 'opacity').min(0.0).max(1.0).step(0.05).name('Opacity').onChange(GUIObjectChange);
                }
            }

            function GUIObjectChange(v) {
                for (const f of this.object.obj.faces) {
                    const m = scene.getObjectByName(f).material;
                    if (this.property == 'color') {
                        m.color.setStyle(v);
                    }
                    if (this.property == 'opacity') {
                        m.opacity = v;
                        m.transparent = (v != 1.0);
                    }
                }
                if (this.property == 'opacity') {
                    const m = this.object.obj.wirematerial;
                    m.opacity = v;
                    m.transparent = (v != 1.0);
                }
                requestRender();
            }

            // Make simple orientation arrows and box - REF: http://jsfiddle.net/b97zd1a3/16/
            const arrowCanvas = document.querySelector('#arrowCanvas');
            const arrowRenderer = new THREE.WebGLRenderer({
                alpha: true,
                canvas: arrowCanvas
            }); // clear
            arrowRenderer.setClearColor(0x000000, 0);
            arrowRenderer.setSize(arrowCanvas.clientWidth * window.devicePixelRatio,
                                  arrowCanvas.clientHeight * window.devicePixelRatio,
                                  false);

            const arrowScene = new THREE.Scene();

            const arrowCamera = new THREE.PerspectiveCamera(
                50, arrowCanvas.clientWidth / arrowCanvas.clientHeight, 1, 500 );
            arrowCamera.up = persCamera.up; // important!

            const arrowPos = new THREE.Vector3(0, 0, 0);
            arrowScene.add(new THREE.ArrowHelper(
                new THREE.Vector3(1, 0, 0), arrowPos, 60, 0x7F2020, 20, 10));
            arrowScene.add(new THREE.ArrowHelper(
                new THREE.Vector3(0, 1, 0), arrowPos, 60, 0x207F20, 20, 10));
            arrowScene.add(new THREE.ArrowHelper(
                new THREE.Vector3(0, 0, 1), arrowPos, 60, 0x20207F, 20, 10));
            arrowScene.add(new THREE.Mesh(
                new THREE.BoxGeometry(40, 40, 40),
                new THREE.MeshLambertMaterial(
                    { color: 0xaaaaaa, flatShading: false })
            ));
            arrowScene.add(new THREE.HemisphereLight(0xC7E8FF, 0xFFE3B3, 1.2));

            // Controls
            const persControls = new OrbitControls(persCamera, renderer.domElement);
            persControls.target = camCenter; // rotate around center of parts
            // persControls.enablePan = false;
            // persControls.enableDamping = true;
            persControls.update();
            const orthControls = new OrbitControls(orthCamera, renderer.domElement);
            orthControls.target = camCenter; // rotate around center of parts
            // orthControls.enablePan = false;
            // orthControls.enableDamping = true;
            orthControls.update();

            function render() {
                renderRequested = false;
                persControls.update();
                if (cameraType == 'Perspective') {
                    arrowCamera.position.copy(persCamera.position);
                    arrowCamera.position.sub(persControls.target);
                }
                orthControls.update();
                if (cameraType == 'Orthographic') {
                    arrowCamera.position.copy(orthCamera.position);
                    arrowCamera.position.sub(orthControls.target);
                }
                arrowCamera.lookAt(arrowScene.position);
                arrowCamera.position.setLength(200);

                if (cameraType == 'Perspective') {
                    renderer.render(scene, persCamera);
                }
                if (cameraType == 'Orthographic') {
                    renderer.render(scene, orthCamera);
                }
                arrowRenderer.render(arrowScene, arrowCamera);
            };

            function requestRender() {
                if (!renderRequested) {
                    renderRequested = true;
                    requestAnimationFrame(render);
                }
            }

            persControls.addEventListener('change', requestRender);
            orthControls.addEventListener('change', requestRender);
            renderer.domElement.addEventListener('mousemove', onMouseMove);
            window.addEventListener('resize', onMainCanvasResize, false);

            onMainCanvasResize();
            requestRender();

            function onMainCanvasResize() {
                const pixelRatio = window.devicePixelRatio;
                const width = canvas.clientWidth * pixelRatio | 0;
                const height = canvas.clientHeight * pixelRatio | 0;
                const needResize = canvas.width !== width || canvas.height !== height;
                const aspect = canvas.clientWidth / canvas.clientHeight;
                if (needResize) {
                    renderer.setSize(width, height, false);

                    // See https://stackoverflow.com/questions/39373113/three-js-resize-window-not-scaling-properly
                    const change = originalAspect / aspect;
                    const newSize = viewSize * change;
                    orthCamera.left = -aspect * newSize / 2;
                    orthCamera.right = aspect * newSize  / 2;
                    orthCamera.top = newSize / 2;
                    orthCamera.bottom = -newSize / 2;
                    orthCamera.updateProjectionMatrix();

                    persCamera.aspect = canvas.clientWidth / canvas.clientHeight;
                    persCamera.updateProjectionMatrix();
                }

                for (const obj of objects) {
                    obj.wirematerial.resolution.set(width, height);
                }
                requestRender();
            }

            // XXX use mouse click to toggle the gui for the selected object?

            function onMouseMove(e)  {
                let c = false;
                if (cameraType == 'Orthographic') {
                    c = orthCamera;
                }
                if (cameraType == 'Perspective') {
                    c = persCamera;
                }
                if (!c) {
                    return;
                }

                const raycaster = new THREE.Raycaster();
                raycaster.setFromCamera(new THREE.Vector2(
                    (e.clientX / canvas.clientWidth) * 2 - 1,
                    -(e.clientY / canvas.clientHeight) * 2 + 1),
                                        c);
                const intersects = raycaster.intersectObjects(raycasterObj);

                let chosen = '';
                for (const i of intersects) {
                    const m = i.object.material;
                    if (m.opacity > 0) {
                        if (m.emissive.getHex() == 0x000000) {
                            m.emissive.setHex( 0x777777 );
                            m.needsUpdate = true;
                            requestRender();
                        }
                        chosen = i.object.name;
                        break;
                    }
                }
                for (const r of raycasterObj) {
                    if (r.name == chosen) {
                        continue;
                    }
                    if (r.material.emissive.getHex() != 0x000000) {
                        r.material.emissive.setHex(0x000000);
                        r.material.needsUpdate = true;
                        requestRender();
                    }
                }
            }
        </script>
    </body>
</html>
